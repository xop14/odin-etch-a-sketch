<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles.css">
    <script src="https://kit.fontawesome.com/63fe9be6f5.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.js"></script>
    <title>Etch-a-sketch</title>
</head>
<body>
    <h1>Pixel machine.</h1>
    <div id="grid"></div>

    <div id="color-bar">
        <div id="current-color-display" title="Click to select custom color">
            <input id="color-picker" type="color" value="#ff0000">
            <div id="current-color-border"></div>
        </div>
        <div id="color-palette"></div>
        <div id="add-remove-btns">
            <div id="add-color-btn" class="add-color-btn" title="Add current color to palette">+</div>
            <div id="remove-color-btn" class="remove-color-btn" title="Remove color from palette">âˆ’</div>
        </div>
    </div>


    <div id="toolbar">
        <div id="brush-tool" class="tool">
            <i class="fa-solid fa-paintbrush"></i>
            <p>Brush</p>
        </div>
        <div id="fill-tool" class="tool">
            <i class="fa-solid fa-fill-drip"></i>
            <p>Fill</p>
        </div>
        <div id="erase-tool" class="tool">
            <i class="fa-solid fa-eraser"></i>
            <p>Eraser</p>
        </div>
        <div id="rainbow-btn" class="tool">
            <i class="fa-solid fa-rainbow"></i>
            <p>Rainbow</p>
        </div>
        <div id="random-btn" class="tool">
            <i class="fa-solid fa-shuffle"></i>
            <p>Random</p>
        </div>
        <div id="undo-btn">
            <i class="fa-solid fa-rotate-left"></i>
            <p>Undo</p>
        </div>
        <div id="redo-btn">
            <i class="fa-solid fa-rotate-right"></i>
            <p>Redo</p>
        </div>
        <div id="clear-btn" class="btn">
            <i class="fa-solid fa-trash"></i>
            <p>Clear</p>
        </div>
        <div id="gridlines-btn">
            <i class="fa-solid fa-border-all"></i>
            <p>Gridlines</p>
        </div>
        <div id="download-btn" onclick="downloadPNG()" class="btn">
            <i class="fa-solid fa-file-arrow-down"></i>
            <p>Download</p>
        </div>
    </div>

    <div id="sliders">
        <div>
            <p>Brush size</p>
            <div>
                <input id="brush-slider" type="range" min="1" max="15" value="1" step="2">
                <output id="brush-slider-display">1px</output>
            </div>
        </div>
        <!-- <div>
            <p id="opacity-slider-display">Brush Opacity</p>
            <div>
                <input id="opacity-slider" type="range" min="0" max="100" value="100" step="10">
                <output id="opacity-size-display">10%</output>
            </div>
        </div> -->
        <div>
            <p>Grid size</p>
            <div>
                <input id="grid-slider" type="range" min="1" max="6" value="4" step="1">
                <output id="grid-slider-display">16 x 16</output>
            </div>
        </div>
    </div>

    <div id="credits">
        Made with <i class="fa-solid fa-heart"></i> by David Green using JavaScript, HTML and CSS.
    </div>

    <script src="./pixel-machine.js"></script>

    <script>
        function downloadPNG() {
            html2canvas(document.querySelector("#grid"), {
                scale: 1
            }).then(function(canvas) {
                const link = document.createElement("a");
                link.download = "pixel-art.png";
                link.href = canvas.toDataURL('image/png');
                link.click();
            });
        }
    </script>

</body>
</html>